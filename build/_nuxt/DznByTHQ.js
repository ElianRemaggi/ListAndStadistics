import{a as E,p as R,u as T,_ as V,b as B,c as C}from"./Bjddj6AN.js";import{j as $,r as s,c as x,o as f,a as t,b as D,v as y,N as b,P as N,Q as S,R as I,t as F,D as K,F as L}from"#entry";const U={data:[],dataOS:[]},j=async(h,r)=>{try{const{data:l}=await E.post(R.getPathMensuales(),{mesanioD:h,mesanioH:r});return l}catch(l){return T().errorSistema("Error al obtener totales. "+l+"."),U}},H={class:"max-w-md w-full rounded-2xl border border-gray-200 bg-gray-50 p-6 shadow-sm m-auto mt-15"},O={class:"flex gap-2"},Y={class:"relative flex-1"},A={class:"mt-2"},Q={key:0},q={key:0,class:"mt-2 text-sm text-red-60 hover:text-red-800"},z={class:"flex md:flex-row justify-center"},W=$({__name:"mensuales",setup(h){const r=s(!1),l=new Date,P=i=>i.toString().padStart(2,"0"),c=`${l.getFullYear()}-${P(l.getMonth()+1)}`,o=s(c),n=s(c),d=s(!1),u=s(""),m=s(void 0),v=s(void 0),g=async()=>{var p;if(v.value=void 0,m.value=void 0,u.value="",d.value||(n.value=o.value),new Date(o.value)>new Date){u.value="La fecha no puede ser mayor a la fecha actual";return}if(new Date(o.value)>new Date(n.value)){u.value="La fecha de inicio no puede ser mayor a la fecha final";return}const i=a=>{const[k,M]=a.split("-").map(Number);return!k||!M?NaN:k*12+(M-1)};d.value||(n.value=o.value);const e=i(o.value);if(i(n.value)-e>12){u.value="El rango no puede superar 12 meses";return}try{r.value=!0,m.value=await j(o.value,n.value),v.value=(p=m.value)==null?void 0:p.data}catch{r.value=!1}finally{r.value=!1}};return(i,e)=>{const _=C,w=V,p=B;return f(),x(L,null,[t("div",H,[e[7]||(e[7]=t("p",{class:"text-center mb-2 block text-xl font-medium text-gray-700"},"Pacientes Mensuales",-1)),e[8]||(e[8]=t("label",{for:"month",class:"mb-2 block text-sm font-medium text-gray-700"}," Seleccionar mes ",-1)),t("div",O,[t("div",Y,[b(t("input",{id:"month","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[1]||(e[1]=S(a=>g(),["enter"]))},null,544),[[N,o.value]]),t("div",A,[e[6]||(e[6]=t("b",{class:"ml-2"},"Rango: ",-1)),b(t("input",{type:"checkbox",id:"hoy","onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),class:"w-5 h-5 pt-2"},null,512),[[I,d.value]])]),d.value?(f(),x("div",Q,[b(t("input",{id:"month","onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 utline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[4]||(e[4]=S(a=>g(),["enter"]))},null,544),[[N,n.value]])])):y("",!0)]),t("button",{type:"button",onClick:e[5]||(e[5]=a=>g()),class:"rounded-xl bg-indigo-400 text-white px-4 py-2.5 font-medium hover:bg-indigo-600 transition"}," Buscar "),u.value?(f(),x("p",q,F(u.value),1)):y("",!0)])]),t("div",z,[v.value?(f(),K(_,{key:0,resultados:v.value,class:"flex-1 m-auto h-fit mt-auto mx-auto p-20"},null,8,["resultados"])):y("",!0),D(w,{data:m.value,titulo:"Pacientes por sede",class:"mr-auto"},null,8,["data"])]),D(p,{blockerRender:r.value},null,8,["blockerRender"])],64)}}});export{W as default};
