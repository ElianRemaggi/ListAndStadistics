import{a as S,p as C,u as V,c as B,_ as P,b as R}from"./DbIzCati.js";import{j as $,r as i,c as y,o as p,a as t,b as E,v as b,N as g,O as I,P as _,Q as D,R as F,t as H,D as M,F as K}from"#entry";const L=async(h,n)=>{try{const{data:l}=await S.post(C.getPathMensuales(),{mesanioD:h,mesanioH:n});return l.data}catch(l){return V().errorSistema("Error al obtener totales. "+l+"."),[]}},U={class:"max-w-md w-full rounded-2xl border border-gray-200 bg-gray-50 p-6 shadow-sm m-auto mt-15"},j={class:"flex gap-2"},T={class:"relative flex-1"},O={class:"ml-5"},Q={class:"mt-2 flex"},Y={class:"inline-flex items-center cursor-pointer ml-2"},q={key:0},z={key:0,class:"mt-2 text-sm text-red-60 hover:text-red-800"},A={class:"block justify-center"},W=$({__name:"mensuales",setup(h){const n=i(!1),l=new Date,N=c=>c.toString().padStart(2,"0"),m=`${l.getFullYear()}-${N(l.getMonth()+1)}`,o=i(m),r=i(m),s=i(!1),u=i(""),d=i(void 0),x=async()=>{if(d.value=void 0,u.value="",s.value||(r.value=o.value),new Date(o.value)>new Date){u.value="La fecha no puede ser mayor a la fecha actual";return}if(new Date(o.value)>new Date(r.value)){u.value="La fecha de inicio no puede ser mayor a la fecha final";return}const c=v=>{const[f,a]=v.split("-").map(Number);return!f||!a?NaN:f*12+(a-1)};s.value||(r.value=o.value);const e=c(o.value);if(c(r.value)-e>12){u.value="El rango no puede superar 12 meses";return}try{n.value=!0,d.value=await L(o.value,r.value)}catch{n.value=!1}finally{n.value=!1}};return(c,e)=>{var f;const k=P,w=R,v=B;return p(),y(K,null,[t("div",U,[e[9]||(e[9]=t("p",{class:"text-center mb-2 block text-xl font-medium text-gray-700"},"Pacientes Mensuales",-1)),e[10]||(e[10]=t("label",{for:"month",class:"mb-2 block text-sm font-medium text-gray-700"}," Seleccionar mes ",-1)),t("div",j,[t("div",T,[g(t("p",O,"Desde",512),[[I,s.value]]),g(t("input",{id:"month","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:m,onKeydown:e[1]||(e[1]=D(a=>x(),["enter"]))},null,544),[[_,o.value]]),t("div",Q,[e[7]||(e[7]=t("b",{class:"ml-2"},"Rango: ",-1)),t("label",Y,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),value:"",class:"sr-only peer"},null,512),[[F,s.value]]),e[6]||(e[6]=t("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"},null,-1))])]),s.value?(p(),y("div",q,[e[8]||(e[8]=t("p",{class:"ml-5"},"Hasta",-1)),g(t("input",{id:"month","onUpdate:modelValue":e[3]||(e[3]=a=>r.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 utline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:m,onKeydown:e[4]||(e[4]=D(a=>x(),["enter"]))},null,544),[[_,r.value]])])):b("",!0)]),t("button",{type:"button",onClick:e[5]||(e[5]=a=>x()),class:"rounded-xl bg-indigo-400 text-white px-4 py-2.5 font-medium hover:bg-indigo-600 transition"}," Buscar "),u.value?(p(),y("p",z,H(u.value),1)):b("",!0)])]),t("div",A,[d.value?(p(),M(k,{key:0,data:d.value,class:"m-auto h-fit mt-auto mx-auto px-20"},null,8,["data"])):b("",!0),((f=d.value)==null?void 0:f[1])!==void 0?(p(),M(w,{key:1,data:d.value,class:"m-auto h-fit mt-auto mx-auto p-20 w-fit"},null,8,["data"])):b("",!0)]),E(v,{blockerRender:n.value},null,8,["blockerRender"])],64)}}});export{W as default};
