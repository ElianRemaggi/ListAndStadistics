import{a as E,p as R,u as T,_ as V,b as B,c as C}from"./Bjddj6AN.js";import{j as $,r as n,c as x,o as v,a as t,b as M,v as y,N as g,O as I,P as S,Q as N,R as F,t as H,D as K,F as L}from"#entry";const O={data:[],dataOS:[]},U=async(h,s)=>{try{const{data:l}=await E.post(R.getPathMensuales(),{mesanioD:h,mesanioH:s});return l}catch(l){return T().errorSistema("Error al obtener totales. "+l+"."),O}},j={class:"max-w-md w-full rounded-2xl border border-gray-200 bg-gray-50 p-6 shadow-sm m-auto mt-15"},Y={class:"flex gap-2"},A={class:"relative flex-1"},Q={class:"ml-5"},q={class:"mt-2 flex"},z={class:"inline-flex items-center cursor-pointer ml-2"},G={key:0},J={key:0,class:"mt-2 text-sm text-red-60 hover:text-red-800"},W={class:"flex md:flex-row justify-center"},ee=$({__name:"mensuales",setup(h){const s=n(!1),l=new Date,P=i=>i.toString().padStart(2,"0"),c=`${l.getFullYear()}-${P(l.getMonth()+1)}`,o=n(c),r=n(c),u=n(!1),d=n(""),f=n(void 0),p=n(void 0),b=async()=>{var m;if(p.value=void 0,f.value=void 0,d.value="",u.value||(r.value=o.value),new Date(o.value)>new Date){d.value="La fecha no puede ser mayor a la fecha actual";return}if(new Date(o.value)>new Date(r.value)){d.value="La fecha de inicio no puede ser mayor a la fecha final";return}const i=a=>{const[_,D]=a.split("-").map(Number);return!_||!D?NaN:_*12+(D-1)};u.value||(r.value=o.value);const e=i(o.value);if(i(r.value)-e>12){d.value="El rango no puede superar 12 meses";return}try{s.value=!0,f.value=await U(o.value,r.value),p.value=(m=f.value)==null?void 0:m.data}catch{s.value=!1}finally{s.value=!1}};return(i,e)=>{const w=C,k=V,m=B;return v(),x(L,null,[t("div",j,[e[9]||(e[9]=t("p",{class:"text-center mb-2 block text-xl font-medium text-gray-700"},"Pacientes Mensuales",-1)),e[10]||(e[10]=t("label",{for:"month",class:"mb-2 block text-sm font-medium text-gray-700"}," Seleccionar mes ",-1)),t("div",Y,[t("div",A,[g(t("p",Q,"Desde",512),[[I,u.value]]),g(t("input",{id:"month","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[1]||(e[1]=N(a=>b(),["enter"]))},null,544),[[S,o.value]]),t("div",q,[e[7]||(e[7]=t("b",{class:"ml-2"},"Rango: ",-1)),t("label",z,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),value:"",class:"sr-only peer"},null,512),[[F,u.value]]),e[6]||(e[6]=t("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"},null,-1))])]),u.value?(v(),x("div",G,[e[8]||(e[8]=t("p",{class:"ml-5"},"Hasta",-1)),g(t("input",{id:"month","onUpdate:modelValue":e[3]||(e[3]=a=>r.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 utline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[4]||(e[4]=N(a=>b(),["enter"]))},null,544),[[S,r.value]])])):y("",!0)]),t("button",{type:"button",onClick:e[5]||(e[5]=a=>b()),class:"rounded-xl bg-indigo-400 text-white px-4 py-2.5 font-medium hover:bg-indigo-600 transition"}," Buscar "),d.value?(v(),x("p",J,H(d.value),1)):y("",!0)])]),t("div",W,[p.value?(v(),K(w,{key:0,resultados:p.value,class:"flex-1 m-auto h-fit mt-auto mx-auto p-20"},null,8,["resultados"])):y("",!0),M(k,{data:f.value,titulo:"Pacientes por sede",class:"mr-auto"},null,8,["data"])]),M(m,{blockerRender:s.value},null,8,["blockerRender"])],64)}}});export{ee as default};
