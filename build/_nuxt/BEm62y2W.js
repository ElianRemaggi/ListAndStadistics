import{a as E,p as R,u as T,_ as V,b as B,c as C}from"./Bjddj6AN.js";import{j as $,r as n,c as y,o as f,a as t,b as M,v as b,N as g,O as I,P as S,Q as N,R as F,t as H,D as K,F as L}from"#entry";const O={data:[],dataOS:[]},U=async(h,l)=>{try{const{data:r}=await E.post(R.getPathMensuales(),{mesanioD:h,mesanioH:l});return r}catch(r){return T().errorSistema("Error al obtener totales. "+r+"."),O}},j={class:"max-w-md w-full rounded-2xl border border-gray-200 bg-gray-50 p-6 shadow-sm m-auto mt-15"},Y={class:"flex gap-2"},A={class:"relative flex-1"},Q={class:"ml-5"},q={class:"mt-2"},z={key:0},G={key:0,class:"mt-2 text-sm text-red-60 hover:text-red-800"},J={class:"flex md:flex-row justify-center"},Z=$({__name:"mensuales",setup(h){const l=n(!1),r=new Date,P=i=>i.toString().padStart(2,"0"),c=`${r.getFullYear()}-${P(r.getMonth()+1)}`,o=n(c),s=n(c),u=n(!1),d=n(""),m=n(void 0),v=n(void 0),x=async()=>{var p;if(v.value=void 0,m.value=void 0,d.value="",u.value||(s.value=o.value),new Date(o.value)>new Date){d.value="La fecha no puede ser mayor a la fecha actual";return}if(new Date(o.value)>new Date(s.value)){d.value="La fecha de inicio no puede ser mayor a la fecha final";return}const i=a=>{const[k,D]=a.split("-").map(Number);return!k||!D?NaN:k*12+(D-1)};u.value||(s.value=o.value);const e=i(o.value);if(i(s.value)-e>12){d.value="El rango no puede superar 12 meses";return}try{l.value=!0,m.value=await U(o.value,s.value),v.value=(p=m.value)==null?void 0:p.data}catch{l.value=!1}finally{l.value=!1}};return(i,e)=>{const _=C,w=V,p=B;return f(),y(L,null,[t("div",j,[e[8]||(e[8]=t("p",{class:"text-center mb-2 block text-xl font-medium text-gray-700"},"Pacientes Mensuales",-1)),e[9]||(e[9]=t("label",{for:"month",class:"mb-2 block text-sm font-medium text-gray-700"}," Seleccionar mes ",-1)),t("div",Y,[t("div",A,[g(t("p",Q,"Desde",512),[[I,u.value]]),g(t("input",{id:"month","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[1]||(e[1]=N(a=>x(),["enter"]))},null,544),[[S,o.value]]),t("div",q,[e[6]||(e[6]=t("b",{class:"ml-2"},"Rango: ",-1)),g(t("input",{type:"checkbox",id:"hoy","onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),class:"w-5 h-5 pt-2"},null,512),[[F,u.value]])]),u.value?(f(),y("div",z,[e[7]||(e[7]=t("p",{class:"ml-5"},"Hasta",-1)),g(t("input",{id:"month","onUpdate:modelValue":e[3]||(e[3]=a=>s.value=a),type:"month",class:"w-full rounded-xl border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-gray-700 placeholder-gray-400 utline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40 hover:border-gray-400",max:c,onKeydown:e[4]||(e[4]=N(a=>x(),["enter"]))},null,544),[[S,s.value]])])):b("",!0)]),t("button",{type:"button",onClick:e[5]||(e[5]=a=>x()),class:"rounded-xl bg-indigo-400 text-white px-4 py-2.5 font-medium hover:bg-indigo-600 transition"}," Buscar "),d.value?(f(),y("p",G,H(d.value),1)):b("",!0)])]),t("div",J,[v.value?(f(),K(_,{key:0,resultados:v.value,class:"flex-1 m-auto h-fit mt-auto mx-auto p-20"},null,8,["resultados"])):b("",!0),M(w,{data:m.value,titulo:"Pacientes por sede",class:"mr-auto"},null,8,["data"])]),M(p,{blockerRender:l.value},null,8,["blockerRender"])],64)}}});export{Z as default};
